# ì½”ë”© ê·œì¹™ (Coding Rules)

> ì‘ì„±ì¼: 2025-12-30  
> ìµœì¢… ì—…ë°ì´íŠ¸: 2025-12-30  
> ëª©ì : ì½”ë“œ í’ˆì§ˆ ë° ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒì„ ìœ„í•œ í•„ìˆ˜ ê·œì¹™

## ğŸ¯ í•µì‹¬ ì›ì¹™

1. **TypeScript Only** ğŸ”¥
2. **Maximum Code Reuse** ğŸ”¥
3. **TDD Required** ğŸ”¥
4. **File Size Limit** ğŸ”¥ (NEW!)
5. **System Structure Integrity** ğŸ”¥

---

## ğŸ“ íŒŒì¼ í¬ê¸° ê´€ë¦¬ ê·œì¹™ (ì—„ê²© ì ìš©)

### ğŸ”´ í•„ìˆ˜ ê·œì¹™

#### 1. 700í–‰ ì´ˆê³¼ ì‹œ ë¬´ì¡°ê±´ ë¶„ë¦¬
- íŒŒì¼ì´ **700í–‰ì„ ì´ˆê³¼**í•˜ë©´ **ì¦‰ì‹œ ëª¨ë“ˆí™”** í•„ìˆ˜
- ì˜ˆì™¸ ì—†ìŒ - "ë‚˜ì¤‘ì— í• ê²Œìš”" ë¶ˆê°€
- ì»¤ë°‹ ì „ ë°˜ë“œì‹œ í™•ì¸

#### 2. ìƒˆ ê¸°ëŠ¥ì€ ë³„ë„ íŒŒì¼ë¡œ
- ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ **ë°˜ë“œì‹œ ë³„ë„ ì»´í¬ë„ŒíŠ¸/ëª¨ë“ˆ**ë¡œ ì‘ì„±
- ê¸°ì¡´ íŒŒì¼ì— "ì¼ë‹¨ ì¶”ê°€" ê¸ˆì§€
- ì²˜ìŒë¶€í„° ì˜¬ë°”ë¥¸ ìœ„ì¹˜ì— ìƒì„±

### ğŸ“Š ë¼ì¸ ìˆ˜ ê¸°ì¤€

| ë²”ìœ„ | ë¶„ë¥˜ | ì¡°ì¹˜ |
|------|------|------|
| 0-150ì¤„ | ì†Œí˜• | í†µí•© ê²€í†  |
| 150-500ì¤„ | **ìµœì ** | âœ… ëª©í‘œ ë²”ìœ„ |
| 500-700ì¤„ | í—ˆìš© | ì£¼ì˜ í•„ìš” |
| **700ì¤„+** | **ë¶„ë¦¬í•„ìˆ˜** | ğŸ”´ ì¦‰ì‹œ ë¶„ë¦¬ |

### âœ… ëª¨ë“ˆí™” ì²´í¬ë¦¬ìŠ¤íŠ¸

ì»¤ë°‹ ì „ ë°˜ë“œì‹œ í™•ì¸:

```bash
# 1. 700í–‰ ì´ˆê³¼ íŒŒì¼ í™•ì¸
Get-ChildItem -Recurse -Filter "*.tsx","*.ts" | Where-Object { 
  (Get-Content $_.FullName | Measure-Object -Line).Lines -gt 700 
} | Select-Object Name, @{Name="Lines";Expression={(Get-Content $_.FullName | Measure-Object -Line).Lines}}

# 2. ì½”ë“œ ì¸ë±ìŠ¤ ì—…ë°ì´íŠ¸
.\scripts\code-index-manager.ps1 -Generate -Optimize
```

- [ ] 700í–‰ ì´ˆê³¼ íŒŒì¼ ì—†ìŒ
- [ ] ì‹ ê·œ ê¸°ëŠ¥ì€ ë³„ë„ íŒŒì¼ë¡œ ìƒì„±
- [ ] ì½”ë“œ ì¸ë±ìŠ¤ ì—…ë°ì´íŠ¸ ì™„ë£Œ
- [ ] ê´€ë ¨ íŒŒì¼ ê°™ì€ í´ë”ì— ë°°ì¹˜
- [ ] í´ë” ê¹Šì´ 4ë‹¨ê³„ ì´í•˜ ìœ ì§€

---

## ğŸ—ï¸ ëª¨ë“ˆí™” ì›ì¹™

### 1. ì‘ì§‘ë ¥ ìš°ì„ 
- ë…¼ë¦¬ì ìœ¼ë¡œ ê´€ë ¨ëœ ì½”ë“œëŠ” í•¨ê»˜ ìœ ì§€
- 700í–‰ ì´ë‚´ë¥¼ ëª©í‘œë¡œ í•˜ë˜, ì‘ì§‘ë ¥ì´ ë†’ìœ¼ë©´ ìœ ì§€ ê°€ëŠ¥
- ì˜ˆ: ë³µì¡í•œ ë‹¨ì¼ ê¸°ëŠ¥ ë¡œì§ (600-700ì¤„)

### 2. ë¯¸ë¡œ ë°©ì§€
- í´ë” ê¹Šì´: ìµœëŒ€ 4ë‹¨ê³„
- ê´€ë ¨ íŒŒì¼: ê°™ì€ í´ë”ì— ë°°ì¹˜
- ì¸ë±ìŠ¤ ë¬¸ì„œ: ì£¼ê¸°ì  ê°±ì‹ 

### 3. ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬
- í•˜ë‚˜ì˜ íŒŒì¼ = í•˜ë‚˜ì˜ ëª…í™•í•œ ì±…ì„
- UI ì»´í¬ë„ŒíŠ¸ vs ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë¶„ë¦¬
- ê³µí†µ ë¡œì§ì€ ìœ í‹¸ë¦¬í‹°ë¡œ ì¶”ì¶œ

---

## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡° ê°€ì´ë“œ

### ê¶Œì¥ êµ¬ì¡°

```
src/app/pfmea/worksheet/
â”œâ”€â”€ page.tsx              # ë©”ì¸ í˜ì´ì§€ (700ì¤„ ì´í•˜ ìœ ì§€)
â”œâ”€â”€ constants.ts          # ìƒìˆ˜ ì •ì˜
â”œâ”€â”€ hooks/                # ì»¤ìŠ¤í…€ í›…
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ useWorksheetState.ts
â”œâ”€â”€ utils/                # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ types.ts
â”‚   â”œâ”€â”€ failure-link-grouping.ts
â”‚   â”œâ”€â”€ row-merge-logic.ts
â”‚   â””â”€â”€ process-grouping.ts
â”œâ”€â”€ tabs/                 # íƒ­ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ analysis/         # ë¶„ì„ íƒ­
â”‚   â”‚   â”œâ”€â”€ structure/
â”‚   â”‚   â”œâ”€â”€ function/
â”‚   â”‚   â””â”€â”€ failure/
â”‚   â”œâ”€â”€ evaluation/       # í‰ê°€ íƒ­
â”‚   â”‚   â”œâ”€â”€ EvalStructureTab.tsx
â”‚   â”‚   â”œâ”€â”€ EvalFunctionTab.tsx
â”‚   â”‚   â””â”€â”€ EvalFailureTab.tsx
â”‚   â””â”€â”€ shared/           # ê³µìš© ì»´í¬ë„ŒíŠ¸
â””â”€â”€ components/           # ë¡œì»¬ ì»´í¬ë„ŒíŠ¸
```

### ê¸ˆì§€ ì‚¬í•­

âŒ ëª¨ë“  ë¡œì§ì„ `page.tsx`ì— ì‘ì„±  
âŒ ê¹Šì€ í´ë” êµ¬ì¡° (5ë‹¨ê³„ ì´ìƒ)  
âŒ ë¹„ìŠ·í•œ ì´ë¦„ì˜ íŒŒì¼ì„ ì—¬ëŸ¬ ê³³ì— ë¶„ì‚°  
âŒ 700í–‰ ë„˜ëŠ” íŒŒì¼ ë°©ì¹˜

---

## ğŸ”„ ë¦¬íŒ©í† ë§ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ê¸°ì¡´ íŒŒì¼ì´ 700í–‰ ì´ˆê³¼

```typescript
// AS-IS: page.tsx (2,747ì¤„) âŒ
export default function Page() {
  // ëª¨ë“  ë¡œì§ì´ ì—¬ê¸°ì—...
  return <div>...</div>
}

// TO-BE: ë¶„ë¦¬ í›„
// page.tsx (700ì¤„ ì´í•˜) âœ…
import { EvalStructureTab, EvalFunctionTab } from './tabs/evaluation';
export default function Page() {
  return <div>...</div>
}

// tabs/evaluation/EvalStructureTab.tsx (116ì¤„) âœ…
export default function EvalStructureTab() { ... }

// tabs/evaluation/EvalFunctionTab.tsx (195ì¤„) âœ…
export default function EvalFunctionTab() { ... }
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ìƒˆ ê¸°ëŠ¥ ì¶”ê°€

```typescript
// âŒ ì˜ëª»ëœ ë°©ë²•: ê¸°ì¡´ íŒŒì¼ì— ì¶”ê°€
// page.tsx (ì´ë¯¸ 600ì¤„)
function Page() {
  // ... ê¸°ì¡´ ë¡œì§ 600ì¤„
  
  // ìƒˆë¡œìš´ "ì—­ì „ê°œ" ê¸°ëŠ¥ ì¶”ê°€ (200ì¤„) â†’ ì´ 800ì¤„ ì´ˆê³¼!
  const reverseFeature = () => { ... }
  
  return <div>...</div>
}

// âœ… ì˜¬ë°”ë¥¸ ë°©ë²•: ë³„ë„ íŒŒì¼ë¡œ ìƒì„±
// tabs/extended/reverse/ReverseFMEATab.tsx (200ì¤„)
export default function ReverseFMEATab() {
  // ì—­ì „ê°œ ê¸°ëŠ¥ ë¡œì§
  return <div>...</div>
}

// page.tsx (610ì¤„) - 10ì¤„ë§Œ ì¶”ê°€
import ReverseFMEATab from './tabs/extended/reverse/ReverseFMEATab';
function Page() {
  // ... ê¸°ì¡´ ë¡œì§ 600ì¤„
  if (tab === 'reverse') return <ReverseFMEATab />;
  return <div>...</div>
}
```

---

## ğŸš¨ ìœ„ë°˜ ì‹œ ì¡°ì¹˜

### ë ˆë²¨ 1: ê²½ê³  (Warning)
- **ì¡°ê±´**: íŒŒì¼ì´ 700-800ì¤„
- **ì¡°ì¹˜**: ë‹¤ìŒ ì»¤ë°‹ ì „ ë¶„ë¦¬ í•„ìš”
- **ì•Œë¦¼**: PR ì½”ë©˜íŠ¸

### ë ˆë²¨ 2: ì°¨ë‹¨ (Blocking)
- **ì¡°ê±´**: íŒŒì¼ì´ 800ì¤„ ì´ˆê³¼
- **ì¡°ì¹˜**: CI ë¹Œë“œ ì‹¤íŒ¨
- **ìš”êµ¬ì‚¬í•­**: ë¶„ë¦¬ ì™„ë£Œ í›„ ì¬ì‹œë„

### ë ˆë²¨ 3: ë¡¤ë°± (Rollback)
- **ì¡°ê±´**: ë°˜ë³µì  ìœ„ë°˜ (3íšŒ ì´ìƒ)
- **ì¡°ì¹˜**: ì»¤ë°‹ ë¡¤ë°± ë° ì¬ì‘ì„±
- **ìš”êµ¬ì‚¬í•­**: ë¦¬íŒ©í† ë§ í”Œëœ ì œì¶œ

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- `docs/REFACTORING_MASTER_PLAN.md` - ë¦¬íŒ©í† ë§ ë§ˆìŠ¤í„° í”Œëœ
- `docs/CODE_OPTIMIZATION_REVIEW.md` - ì½”ë“œ ìµœì í™” ê²€í† 
- `docs/MODULARIZATION_LESSONS_LEARNED.md` - ëª¨ë“ˆí™” êµí›ˆ
- `docs/CODE_INDEX.md` - ì½”ë“œ ì¸ë±ìŠ¤ (ìˆ˜ë™)
- `docs/CODE_INDEX_AUTO.md` - ì½”ë“œ ì¸ë±ìŠ¤ (ìë™ìƒì„±)

---

## ğŸ› ï¸ ìë™í™” ë„êµ¬

### ì½”ë“œ ì¸ë±ìŠ¤ ê´€ë¦¬

```powershell
# ì½”ë“œ ì¸ë±ìŠ¤ ìƒì„± ë° ìµœì í™” ì œì•ˆ
.\scripts\code-index-manager.ps1 -Generate -Optimize

# 700í–‰ ì´ˆê³¼ íŒŒì¼ ìë™ ê²€ìƒ‰
.\scripts\find-large-files.ps1 -Threshold 700
```

### Pre-commit Hook (ì˜ˆì •)

```bash
# .git/hooks/pre-commit
#!/bin/sh
# 700í–‰ ì´ˆê³¼ íŒŒì¼ ì²´í¬
large_files=$(find src -name "*.ts" -o -name "*.tsx" | xargs wc -l | awk '$1 > 700 {print $2}')
if [ ! -z "$large_files" ]; then
  echo "âŒ Error: Files exceeding 700 lines found:"
  echo "$large_files"
  echo "Please split these files before committing."
  exit 1
fi
```

---

## âœ… ì„±ê³µ ì‚¬ë¡€

### v1.8.0-v1.8.1 ë¦¬íŒ©í† ë§ (2025-12-30)

**Before**:
- `page.tsx`: 2,747ì¤„ âŒ

**After**:
- `page.tsx`: 2,264ì¤„ âœ… (483ì¤„ ê°ì†Œ)
- `utils/`: 5ê°œ íŒŒì¼ ìƒì„± (200ì¤„)
- `tabs/evaluation/`: 3ê°œ íŒŒì¼ ìƒì„± (423ì¤„)

**ê²°ê³¼**:
- âœ… ì¤‘ë³µ ì½”ë“œ ì œê±°
- âœ… í…ŒìŠ¤íŠ¸ ìš©ì´ì„± í–¥ìƒ
- âœ… ìœ ì§€ë³´ìˆ˜ì„± ê°œì„ 
- âœ… 700í–‰ ê·œì¹™ ì¤€ìˆ˜

---

## ğŸ“‹ ìš”ì•½

1. **700í–‰ ì´ˆê³¼ = ì¦‰ì‹œ ë¶„ë¦¬** ğŸ”´
2. **ìƒˆ ê¸°ëŠ¥ = ìƒˆ íŒŒì¼** ğŸŸ¢
3. **ì»¤ë°‹ ì „ ì²´í¬ í•„ìˆ˜** âœ…
4. **ì‘ì§‘ë ¥ ìš°ì„ , ë¯¸ë¡œ ë°©ì§€** ğŸ¯
5. **ìë™í™” ë„êµ¬ í™œìš©** ğŸ› ï¸

**Remember**: "ë‚˜ì¤‘ì— í• ê²Œìš”" â†’ "ì§€ê¸ˆ ë‹¹ì¥ í•˜ì„¸ìš”!" ğŸ’ª

