# FunctionL3Tab TDD 검증 가이드

## 테스트 시나리오

### 1. 기본 기능 추가 테스트
1. 브라우저에서 `/pfmea/worksheet` 접속
2. "기능분석" 탭 → "3L 작업요소 기능분석" 클릭
3. "수정" 버튼 클릭 (확정 상태 해제)
4. 작업요소 기능 셀 클릭 (빈 셀 또는 기존 기능 셀)
5. 모달에서 새로운 기능 선택
6. 콘솔 로그 확인:
   - `[FunctionL3Tab] 저장 시작` - 모달 정보 확인
   - `[FunctionL3Tab] 현재 기능 개수: X` - 기존 기능 개수
   - `[FunctionL3Tab] 새 기능 추가 (수정 모드): [선택한 기능명]` - 새 기능 추가 확인
   - `[FunctionL3Tab] 상태 업데이트 완료` - 상태 업데이트 확인
   - `[FunctionL3Tab] 저장 완료` - 저장 완료 확인
7. 화면에서 새 기능이 추가되었는지 확인

### 2. 빈 기능 할당 테스트
1. 작업요소에 기능이 없는 경우
2. 작업요소 기능 셀 클릭
3. 모달에서 기능 선택
4. 콘솔 로그 확인:
   - `[FunctionL3Tab] 빈 기능에 할당: [선택한 기능명]`
5. 화면에서 기능이 할당되었는지 확인

### 3. 기존 기능 수정 테스트
1. 이미 기능이 있는 셀 클릭
2. 모달에서 다른 기능 선택
3. 콘솔 로그 확인:
   - `[FunctionL3Tab] 기존 기능 수정: [funcId]`
4. 화면에서 기능이 수정되었는지 확인

### 4. 확정 모드에서 기능 추가 불가 테스트
1. "확정" 버튼 클릭
2. 작업요소 기능 셀 클릭
3. 모달에서 기능 선택
4. 콘솔 로그 확인:
   - `[FunctionL3Tab] 기능 추가 안됨` - isConfirmed: true
5. 화면에서 기능이 추가되지 않았는지 확인

### 5. 자동 저장 테스트
1. 기능 추가 후
2. 다른 탭으로 이동
3. 다시 3L 탭으로 돌아옴
4. 추가한 기능이 유지되는지 확인
5. 콘솔 로그 확인:
   - `[FunctionL3Tab] l3.functions 변경 감지, 자동 저장`

## 예상 로그 출력

### 정상 작동 시
```
[FunctionL3Tab] 저장 시작 { type: 'l3Function', procId: '...', l3Id: '...', funcId: undefined, selectedCount: 1 }
[FunctionL3Tab] 현재 기능 개수: 0 선택 개수: 1
[FunctionL3Tab] 새 기능 추가 (수정 모드): [선택한 기능명]
[FunctionL3Tab] 상태 업데이트 완료
[FunctionL3Tab] 저장 완료
[FunctionL3Tab] l3.functions 변경 감지, 자동 저장
```

### 오류 발생 시
```
[FunctionL3Tab] modal이 없습니다!
또는
[FunctionL3Tab] procId 또는 l3Id가 없습니다! { procId: undefined, l3Id: undefined }
또는
[FunctionL3Tab] procId에 해당하는 공정을 찾을 수 없습니다!
또는
[FunctionL3Tab] l3Id에 해당하는 작업요소를 찾을 수 없습니다!
```

## 검증 체크리스트

- [ ] 수정 모드에서 새 기능 추가 가능
- [ ] 빈 기능 셀에 기능 할당 가능
- [ ] 기존 기능 수정 가능
- [ ] 확정 모드에서 기능 추가 불가
- [ ] 자동 저장 작동
- [ ] 콘솔 로그 정상 출력
- [ ] 화면에 변경사항 반영

## 문제 발생 시

1. 브라우저 콘솔(F12)에서 에러 메시지 확인
2. `[FunctionL3Tab]`로 시작하는 로그 확인
3. 로그에서 어느 단계에서 실패했는지 확인
4. 문제 지점을 개발자에게 보고




