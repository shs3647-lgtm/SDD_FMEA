# ğŸ­ Control Plan (ê´€ë¦¬ê³„íšì„œ) ê°œë°œ ë§ˆìŠ¤í„° í”Œëœ

> **ë²„ì „**: 2.0.0  
> **ì‘ì„±ì¼**: 2026-01-12  
> **ìƒíƒœ**: ê°œë°œ ì¤‘  
> **ì°¸ì¡° ë¬¸ì„œ**: ê´€ë¦¬ê³„íšì„œ_PRD.md, CP_PFMEA_ë°ì´í„°ì—°ê³„ì„±.md

### í˜„ì¬ ì»¬ëŸ¼ í­ (19ì»¬ëŸ¼, ë°˜ì‘í˜•) âœ… minWidth ê¸°ì¤€, ìë™ í™•ì¥

| ê·¸ë£¹ | ì»¬ëŸ¼ëª… | í­(px) | ì •ë ¬ | FMEAì—°ë™ | íƒ€ì… |
|------|--------|--------|------|----------|------|
| **ê³µì •í˜„í™©** (350px) | | | | | |
| | ê³µì •ë²ˆí˜¸ | 45 | center | âœ… | text |
| | ê³µì •ëª… | 65 | center | âœ… | text |
| | ë ˆë²¨ | 30 | center | | select |
| | ê³µì •ì„¤ëª… | 150 | **left** | âœ… | text |
| | ì‘ì—…ìš”ì†Œ | 60 | center | âœ… | text |
| **ê²€ì¶œì¥ì¹˜** (50px) | | | | | |
| | NO | 14 | center | | boolean |
| | EP | 18 | center | | boolean |
| | ìë™ | 18 | center | | boolean |
| **ê´€ë¦¬í•­ëª©** (270px) | | | | | |
| | ì œí’ˆíŠ¹ì„± | 80 | center | âœ… | text |
| | ê³µì •íŠ¹ì„± | 80 | center | âœ… | text |
| | íŠ¹ë³„íŠ¹ì„± | 35 | center | âœ… | select |
| | ìŠ¤í™/ê³µì°¨ | 75 | center | | text |
| **ê´€ë¦¬ë°©ë²•** (290px) | | | | | |
| | í‰ê°€ë°©ë²• | 70 | center | | text |
| | ìƒ˜í”Œ | 35 | center | | text |
| | ì£¼ê¸° | 45 | center | | select |
| | ê´€ë¦¬ë°©ë²• | 80 | center | âœ… | text |
| | ì±…ì„1 | 30 | center | | select |
| | ì±…ì„2 | 30 | center | | select |
| **ëŒ€ì‘ê³„íš** (240px) | | | | | |
| | ëŒ€ì‘ê³„íš | 240 | center | | text |

---

## 1. ê°œìš”

### 1.1 ëª©ì 
PFMEAì™€ ì–‘ë°©í–¥ ì—°ë™ë˜ëŠ” Control Plan(ê´€ë¦¬ê³„íšì„œ) ì‹œìŠ¤í…œ êµ¬ì¶•

### 1.2 í•µì‹¬ ì›ì¹™

| ì›ì¹™ | ì„¤ëª… |
|------|------|
| **SSOT (Single Source of Truth)** | ê³µì • ì •ì˜ì˜ ë‹¨ì¼ ê¸°ì¤€ì€ PFMEA |
| **ì–‘ë°©í–¥ ì—°ë™** | PFMEA â†” CP ì‹¤ì‹œê°„ ë™ê¸°í™” |
| **ìë™ ìƒì„±** | PFMEA/CP í™•ì • ì‹œ ìƒëŒ€ë°© ìë™ ìƒì„±/ì—…ë°ì´íŠ¸ |
| **DB ë¶„ë¦¬** | CPì™€ FMEAëŠ” ë³„ë„ í…Œì´ë¸”ì— ì €ì¥ |
| **íŠ¸ëœì­ì…˜ ë™ì‹œ ì €ì¥** | ì›ìì„± ë³´ì¥ (ë‘˜ ë‹¤ ì„±ê³µ ë˜ëŠ” ë‘˜ ë‹¤ ë¡¤ë°±) |
| **ID ì²´ê³„ í†µì¼** | FMEAì™€ ë™ì¼í•œ ë²ˆí˜¸ ì²´ê³„ ì‚¬ìš© |

---

## 2. ID ì²´ê³„

### 2.1 CP ë²ˆí˜¸ ê·œì¹™

```
CP26-{íƒ€ì…}{ì‹œí€€ìŠ¤}
```

| íƒ€ì… | ì½”ë“œ | ì˜ˆì‹œ | ì„¤ëª… |
|------|------|------|------|
| Master | M | CP26-M001 | ë§ˆìŠ¤í„° CP |
| Family | F | CP26-F001 | íŒ¨ë°€ë¦¬ CP |
| Part | P | CP26-P001 | ë¶€í’ˆ CP |

### 2.2 FMEA-CP ID ë§¤í•‘

```
PFMEA: pfm26-M001 â†â†’ CP: cp26-M001
PFMEA: pfm26-F001 â†â†’ CP: cp26-F001
PFMEA: pfm26-P001 â†â†’ CP: cp26-P001
```

### 2.3 í–‰ ë‹¨ìœ„ Key ì„¤ê³„ (ì¶”ì ì„± ë³´ì¥)

```
PFMEA_ROW_UID = project_id + rev + process_no + work_element_id
CP_ROW_UID    = cp_id + cp_rev + PFMEA_ROW_UID (FK)

â†’ PFMEAâ€“CP í–‰ 1:1 ë§¤í•‘ ë³´ì¥
â†’ ê°ì‚¬ ì¶”ì ì„± 100% í™•ë³´
```

---

## 3. í™”ë©´ ì •ì˜ì„œ

### 3.1 í™”ë©´ êµ¬ì„± ì˜ì—­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ìƒë‹¨ ë©”íƒ€ì •ë³´ ì˜ì—­]                                                          â”‚
â”‚  í”„ë¡œì íŠ¸ëª… | ì œí’ˆ/í’ˆë²ˆ | ê³µì •ë²”ìœ„(From~To) | CPë²„ì „ | ìŠ¹ì¸ìƒíƒœ                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ìƒë‹¨ ë²„íŠ¼ ì˜ì—­]                                                              â”‚
â”‚  ì„ì‹œì €ì¥ | ìŠ¹ì¸ìš”ì²­ | ìŠ¹ì¸ | ê°œì • | Excel Export | PFMEAì—°ë™                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                     Control Plan ì›Œí¬ì‹œíŠ¸ (24ê°œ ì»¬ëŸ¼)                     â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  [ê³µì •í˜„í™© 9ì—´]     [ê´€ë¦¬í•­ëª© 4ì—´]    [ê´€ë¦¬ë°©ë²• 7ì—´]   [ìƒíƒœ 4ì—´]           â”‚â”‚
â”‚  â”‚   íŒŒë‘ #1565c0      ë…¹ìƒ‰ #2e7d32      ì£¼í™© #f57c00     ë¹¨ê°• #c62828       â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â”‚ [í•˜ë‹¨ ìƒíƒœë°”]                                                                 â”‚
â”‚  ë™ê¸°í™” ìƒíƒœ: âœ… PFMEA ì—°ë™ë¨ (pfm26-M001) | 24ê°œ í•­ëª© | ë³€ê²½ ì•Œë¦¼: 2ê±´       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ì»¬ëŸ¼ ìƒì„¸ ì •ì˜ (24ê°œ ì»¬ëŸ¼)

#### [ê³µì •í˜„í™© ì˜ì—­ - 9ì—´] (ë°°ê²½: #1565c0 íŒŒë‘)

| No | ì»¬ëŸ¼ëª… | í­ | PFMEA ì—°ê³„ | í¸ì§‘ | ì„¤ëª… |
|----|--------|-----|-----------|------|------|
| 1 | ê³µì •ë²ˆí˜¸ | 60px | âœ… L2.no | Read-only | PFMEA ê³µì •ë²ˆí˜¸ ìë™ ë§¤í•‘ |
| 2 | ê³µì •ëª… | 100px | âœ… L2.name | Read-only | PFMEA ì—°ê³„ |
| 3 | ê³µì •ë ˆë²¨ | 60px | âœ… L2.level | Read-only | Main / Sub |
| 4 | ê³µì •ì„¤ëª… | 150px | âœ… L2.functions | Read-only | PFMEA ê¸°ëŠ¥ ì—°ê³„ |
| 5 | ì‘ì—…ìš”ì†Œ | 100px | âœ… L3.name | Read-only | PFMEA ì‘ì—…ìš”ì†Œ |
| 6 | ì„¤ë¹„/ê¸ˆí˜•/Jig | 120px | âŒ | Editable | CP ì „ìš© ì…ë ¥ |
| 7 | ê²€ì¶œì¥ì¹˜_NO | 40px | âŒ | Editable | Boolean (â—/â—‹) |
| 8 | ê²€ì¶œì¥ì¹˜_EP | 40px | âŒ | Editable | Boolean (â—/â—‹) |
| 9 | ê²€ì¶œì¥ì¹˜_ìë™ | 50px | âŒ | Editable | Boolean (â—/â—‹) |

#### [ê´€ë¦¬í•­ëª© ì˜ì—­ - 4ì—´] (ë°°ê²½: #2e7d32 ë…¹ìƒ‰)

| No | ì»¬ëŸ¼ëª… | í­ | PFMEA ì—°ê³„ | í¸ì§‘ | ì„¤ëª… |
|----|--------|-----|-----------|------|------|
| 10 | ì œí’ˆíŠ¹ì„± | 100px | âœ… productChar | Read-only | PFMEA ì œí’ˆíŠ¹ì„± |
| 11 | ê³µì •íŠ¹ì„± | 100px | âœ… processChar | Read-only | PFMEA ê³µì •íŠ¹ì„± |
| 12 | íŠ¹ë³„íŠ¹ì„± | 60px | âœ… specialChar | Read-only | CC/SC/IC ë°°ì§€ |
| 13 | ìŠ¤í™/ê³µì°¨ | 100px | âŒ | Editable | ê·œê²© ì…ë ¥ |

#### [ê´€ë¦¬ë°©ë²• ì˜ì—­ - 7ì—´] (ë°°ê²½: #f57c00 ì£¼í™©)

| No | ì»¬ëŸ¼ëª… | í­ | PFMEA ì—°ê³„ | í¸ì§‘ | ì„¤ëª… |
|----|--------|-----|-----------|------|------|
| 14 | í‰ê°€/ì¸¡ì •ë°©ë²• | 100px | âŒ | Editable | ë“œë¡­ë‹¤ìš´ + ì§ì ‘ì…ë ¥ |
| 15 | ìƒ˜í”Œë§í¬ê¸° | 60px | âŒ | Editable | ìˆ«ì / 100% / ALL |
| 16 | ìƒ˜í”Œë§ì£¼ê¸° | 80px | âŒ | Editable | LOT/SHIFT/DAY ë“œë¡­ë‹¤ìš´ |
| 17 | ê´€ë¦¬ë°©ë²• | 150px | âœ… prevention/detection | Editable | PFMEA ì˜ˆë°©/ê²€ì¶œê´€ë¦¬ ì°¸ì¡° |
| 18 | ì±…ì„1 | 80px | âŒ | Editable | ë¶€ì„œ/ì§ë¬´ ì„ íƒ |
| 19 | ì±…ì„2 | 80px | âŒ | Editable | ì„ íƒ ì‚¬í•­ |
| 20 | ëŒ€ì‘ê³„íš | 150px | âŒ | Editable | ì´ìƒ ì‹œ ì¡°ì¹˜ë°©ë²• |

#### [ìƒíƒœ/ë¦¬ìŠ¤í¬ ì°¸ì¡° ì˜ì—­ - 4ì—´] (ë°°ê²½: #c62828 ë¹¨ê°•)

| No | ì»¬ëŸ¼ëª… | í­ | PFMEA ì—°ê³„ | í¸ì§‘ | ì„¤ëª… |
|----|--------|-----|-----------|------|------|
| 21 | ì—°ê³„ìƒíƒœ | 60px | - | Read-only | ì •ìƒ/ë³€ê²½ê°ì§€/ë¯¸ì—°ê³„ |
| 22 | S (ì‹¬ê°ë„) | 40px | âœ… severity | Read-only | ì°¸ì¡°ìš© |
| 23 | AP | 40px | âœ… ap | Read-only | H/M/L ë°°ì§€ |
| 24 | ë³€ê²½ì•Œë¦¼ | 40px | - | Read-only | âš ï¸ ì•„ì´ì½˜ |

---

## 4. PFMEA â†” CP ë°ì´í„° ì—°ê³„ë„

### 4.1 ì „ì²´ ì—°ê³„ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           PFMEA â†” CP ë°ì´í„° ì—°ê³„ ì•„í‚¤í…ì²˜                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”‚        PFMEA            â”‚              â”‚      Control Plan       â”‚         â”‚
â”‚   â”‚    (Single Source)      â”‚              â”‚   (ê´€ë¦¬ ì‹¤í–‰ ë¬¸ì„œ)       â”‚         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                â”‚                                        â”‚                      â”‚
â”‚                â–¼                                        â–¼                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚                        ì—°ê³„ ëŒ€ìƒ ë°ì´í„°                               â”‚      â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚   â”‚                                                                      â”‚      â”‚
â”‚   â”‚  [2ë‹¨ê³„ êµ¬ì¡°ë¶„ì„]          [3ë‹¨ê³„ ê¸°ëŠ¥ë¶„ì„]         [4ë‹¨ê³„ ê³ ì¥ë¶„ì„]   â”‚      â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚
â”‚   â”‚  â”‚ ì™„ì œí’ˆê³µì •ëª…  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ ê³µì •ê¸°ëŠ¥      â”‚â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ ê³ ì¥í˜•íƒœ(FM) â”‚   â”‚      â”‚
â”‚   â”‚  â”‚ ë©”ì¸ê³µì •ëª…    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ ì‘ì—…ìš”ì†Œê¸°ëŠ¥  â”‚â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ ê³ ì¥ì›ì¸(FC) â”‚   â”‚      â”‚
â”‚   â”‚  â”‚ ì‘ì—…ìš”ì†Œ     â”‚         â”‚              â”‚        â”‚              â”‚   â”‚      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚
â”‚   â”‚         â”‚                        â”‚                       â”‚           â”‚      â”‚
â”‚   â”‚         â”‚ CP ë§¤í•‘                â”‚ CP ë§¤í•‘               â”‚ CP ì°¸ì¡°   â”‚      â”‚
â”‚   â”‚         â–¼                        â–¼                       â–¼           â”‚      â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚
â”‚   â”‚  â”‚ ê³µì •ë²ˆí˜¸      â”‚         â”‚ ê³µì •ì„¤ëª…      â”‚        â”‚ ê´€ë¦¬ëŒ€ìƒ ì„ ì • â”‚   â”‚      â”‚
â”‚   â”‚  â”‚ ê³µì •ëª…       â”‚         â”‚ ì œí’ˆíŠ¹ì„±      â”‚        â”‚ ê·¼ê±° Tooltip  â”‚   â”‚      â”‚
â”‚   â”‚  â”‚ ê³µì •ë ˆë²¨     â”‚         â”‚ ê³µì •íŠ¹ì„±      â”‚        â”‚ Drill-down   â”‚   â”‚      â”‚
â”‚   â”‚  â”‚ ì‘ì—…ìš”ì†Œ     â”‚         â”‚ íŠ¹ë³„íŠ¹ì„±      â”‚        â”‚              â”‚   â”‚      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚
â”‚   â”‚                                                                      â”‚      â”‚
â”‚   â”‚  [5ë‹¨ê³„ ë¦¬ìŠ¤í¬ë¶„ì„]        [6ë‹¨ê³„ ìµœì í™”]                             â”‚      â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚      â”‚
â”‚   â”‚  â”‚ ì‹¬ê°ë„(S)    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ ì˜ˆë°©ê´€ë¦¬     â”‚â”€â”€â–º CP ê´€ë¦¬ë°©ë²• ì°¸ì¡°       â”‚      â”‚
â”‚   â”‚  â”‚ ë°œìƒë„(O)    â”‚         â”‚ ê²€ì¶œê´€ë¦¬     â”‚                           â”‚      â”‚
â”‚   â”‚  â”‚ ê²€ì¶œë„(D)    â”‚         â”‚              â”‚                           â”‚      â”‚
â”‚   â”‚  â”‚ AP (H/M/L)   â”‚         â”‚              â”‚                           â”‚      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚      â”‚
â”‚   â”‚                                                                      â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ì»¬ëŸ¼ ë‹¨ìœ„ ë§¤í•‘ í…Œì´ë¸”

| PFMEA ì»¬ëŸ¼ | PFMEA Key | CP ì»¬ëŸ¼ | CP Key | ì—°ê³„ ë°©í–¥ | ë¹„ê³  |
|------------|-----------|---------|--------|-----------|------|
| ì™„ì œí’ˆ ê³µì •ëª… | l1.name | ê³µì •ê·¸ë£¹ | process_group | PFMEA â†’ CP | Read-only |
| ë©”ì¸ ê³µì •ë²ˆí˜¸ | l2.no | ê³µì •ë²ˆí˜¸ | process_no | PFMEA â†’ CP | Read-only |
| ë©”ì¸ ê³µì •ëª… | l2.name | ê³µì •ëª… | process_name | PFMEA â†’ CP | Read-only |
| ê³µì • ê¸°ëŠ¥ | l2.functions | ê³µì •ì„¤ëª… | process_desc | PFMEA â†’ CP | Read-only |
| ì‘ì—…ìš”ì†Œ | l3.name | ì‘ì—…ìš”ì†Œ | work_element | PFMEA â†’ CP | Read-only |
| ì œí’ˆíŠ¹ì„± | productChars[].name | ì œí’ˆíŠ¹ì„± | product_char | PFMEA â†’ CP | Read-only |
| ê³µì •íŠ¹ì„± | processChars[].name | ê³µì •íŠ¹ì„± | process_char | PFMEA â†’ CP | Read-only |
| íŠ¹ë³„íŠ¹ì„± | specialChar | íŠ¹ë³„íŠ¹ì„± | special_char | PFMEA â†’ CP | Read-only |
| ì‹¬ê°ë„ | riskData.severity | ì‹¬ê°ë„(S) | ref_severity | PFMEA â†’ CP | ì°¸ì¡°ìš© |
| ë°œìƒë„ | riskData.occurrence | ë°œìƒë„(O) | ref_occurrence | PFMEA â†’ CP | ì°¸ì¡°ìš© |
| ê²€ì¶œë„ | riskData.detection | ê²€ì¶œë„(D) | ref_detection | PFMEA â†’ CP | ì°¸ì¡°ìš© |
| AP | calculated | AP | ref_ap | PFMEA â†’ CP | ì°¸ì¡°ìš© |
| ì˜ˆë°©ê´€ë¦¬ | riskData.prevention | ê´€ë¦¬ë°©ë²• | control_method | PFMEA â†” CP | ì–‘ë°©í–¥ |
| ê²€ì¶œê´€ë¦¬ | riskData.detection | ê´€ë¦¬ë°©ë²• | control_method | PFMEA â†” CP | ì–‘ë°©í–¥ |

### 4.3 PFMEA ë‹¨ê³„ë³„ CP ìƒì„± ë¡œì§

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PFMEA ë‹¨ê³„ë³„ CP ìƒì„± íŠ¸ë¦¬ê±°                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  [Step 3: ê¸°ëŠ¥ë¶„ì„ í™•ì •]                                                  â”‚
â”‚  â”œâ”€ ê¸°ëŠ¥ ë‹¨ìœ„ ê³µì • ì •ì˜ í™•ì •                                               â”‚
â”‚  â””â”€ CP ê¸°ë³¸ í–‰ ìë™ ìƒì„± (ê³µì •ë²ˆí˜¸, ê³µì •ëª…, ì‘ì—…ìš”ì†Œ)                        â”‚
â”‚                                                                          â”‚
â”‚  [Step 4: ê³ ì¥ë¶„ì„ í™•ì •]                                                  â”‚
â”‚  â”œâ”€ FM/FC ì¡´ì¬ ì‹œ ê´€ë¦¬ í•„ìš” Flag ë¶€ì—¬                                     â”‚
â”‚  â””â”€ CP ê´€ë¦¬í•­ëª© ìë™ í›„ë³´ ë“±ë¡ (ì œí’ˆíŠ¹ì„±, ê³µì •íŠ¹ì„±)                          â”‚
â”‚                                                                          â”‚
â”‚  [Step 5: ë¦¬ìŠ¤í¬ë¶„ì„ í™•ì •]                                                â”‚
â”‚  â”œâ”€ AP=High ë˜ëŠ” íŠ¹ë³„íŠ¹ì„± ì¡´ì¬ ì‹œ CP ìƒì„± í•„ìˆ˜                              â”‚
â”‚  â”œâ”€ RPN ê°’ CPì— í‘œì‹œ (ì°¸ì¡°ìš©)                                             â”‚
â”‚  â””â”€ ì‹¬ê°ë„/ë°œìƒë„/ê²€ì¶œë„ CPì— ë°˜ì˜                                         â”‚
â”‚                                                                          â”‚
â”‚  [Step 6: ìµœì í™” í™•ì •]                                                    â”‚
â”‚  â”œâ”€ ì˜ˆë°©/ê²€ì¶œê´€ë¦¬ ê°œì„  ë‚´ìš© CPì— ë°˜ì˜ ì•Œë¦¼                                  â”‚
â”‚  â””â”€ CP ê°œì • í•„ìš” ìƒíƒœ í‘œì‹œ                                                â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4 ë™ê¸°í™” íŠ¸ë¦¬ê±° ë° ê·œì¹™

| íŠ¸ë¦¬ê±° | PFMEA ë™ì‘ | CP ë™ì‘ |
|--------|-----------|---------|
| PFMEA ì €ì¥ (Draft) | ì‹ ê·œ í–‰ ì¶”ê°€ | CP Draft í–‰ ìë™ ìƒì„± |
| PFMEA êµ¬ì¡° ìˆ˜ì • | ê³µì •/ì‘ì—…ìš”ì†Œ ë³€ê²½ | CP êµ¬ì¡° ìë™ ë°˜ì˜ |
| PFMEA ìŠ¹ì¸ | Approved ìƒíƒœ | CP êµ¬ì¡° ì ê¸ˆ (ê´€ë¦¬ë°©ë²•ë§Œ í¸ì§‘) |
| PFMEA ê°œì • | Rev +1 | ê¸°ì¡´ CP Obsolete, ì‹ ê·œ CP Draft ìƒì„± |
| PFMEA ê³µì • ì¶”ê°€ | L2 í–‰ ì¶”ê°€ | CP í–‰ ìë™ ì¶”ê°€ |
| PFMEA ê³µì • ì‚­ì œ | L2 í–‰ ì‚­ì œ | CP í–‰ ë¹„í™œì„± ì²˜ë¦¬ |
| PFMEA íŠ¹ë³„íŠ¹ì„± ë³€ê²½ | specialChar ìˆ˜ì • | CP ë³€ê²½ ì•Œë¦¼ Flag + Highlight |

### 4.5 ìƒíƒœ ë¨¸ì‹  (State Machine)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ìƒíƒœ ì „ì´ ë‹¤ì´ì–´ê·¸ë¨                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  PFMEA:  Draft â”€â”€â”€â”€â”€â”€â–º Approved â”€â”€â”€â”€â”€â”€â–º Revised (Rev+1)                 â”‚
â”‚            â”‚              â”‚                â”‚                             â”‚
â”‚            â”‚              â”‚                â”‚                             â”‚
â”‚            â–¼              â–¼                â–¼                             â”‚
â”‚  CP:     Draft â”€â”€â”€â”€â”€â”€â–º Approved â”€â”€â”€â”€â”€â”€â–º Obsolete                        â”‚
â”‚            â”‚              â”‚                                              â”‚
â”‚            â”‚              â””â”€ ê´€ë¦¬ë°©ë²•ë§Œ í¸ì§‘ ê°€ëŠ¥                           â”‚
â”‚            â”‚                                                             â”‚
â”‚            â””â”€ ì „ì²´ í¸ì§‘ ê°€ëŠ¥ (PFMEA ì—°ê³„ ì»¬ëŸ¼ ì œì™¸)                          â”‚
â”‚                                                                          â”‚
â”‚  â€» PFMEA ìƒíƒœê°€ CP ìƒìœ„ ìƒíƒœ                                              â”‚
â”‚  â€» PFMEA Approved â†’ CP êµ¬ì¡° ì ê¸ˆ                                         â”‚
â”‚  â€» PFMEA Rev ì¦ê°€ â†’ ê¸°ì¡´ CP Obsolete, ì‹ ê·œ CP Draft ìƒì„±                  â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. DB ìŠ¤í‚¤ë§ˆ ì„¤ê³„

### 5.1 í…Œì´ë¸” ê´€ê³„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PostgreSQL DB                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚   fmea_projects â”‚ â—„â”€â”€â”€â”€â”€â–º â”‚  control_plans  â”‚                    â”‚
â”‚  â”‚   (PFMEA í—¤ë”)   â”‚   1:1   â”‚   (CP í—¤ë”)      â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚           â”‚ 1:N                       â”‚ 1:N                         â”‚
â”‚           â–¼                           â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ fmea_worksheets â”‚ â—„â”€â”€â”€â”€â”€â–º â”‚control_plan_itemsâ”‚                   â”‚
â”‚  â”‚ (PFMEA ìƒì„¸)     â”‚   1:1   â”‚ (CP í–‰ ë°ì´í„°)    â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  (FK)   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    sync_logs (ë™ê¸°í™” ì´ë ¥)                    â”‚    â”‚
â”‚  â”‚  - source_type: 'pfmea' | 'cp'                               â”‚    â”‚
â”‚  â”‚  - source_id: ì›ë³¸ ID                                        â”‚    â”‚
â”‚  â”‚  - target_id: ëŒ€ìƒ ID                                        â”‚    â”‚
â”‚  â”‚  - sync_status: 'pending' | 'synced' | 'failed'              â”‚    â”‚
â”‚  â”‚  - synced_at: ë™ê¸°í™” ì‹œê°„                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 control_plans í…Œì´ë¸”

```prisma
model ControlPlan {
  id            String   @id @default(uuid())
  cpNo          String   @unique  // CP26-M001 í˜•ì‹
  
  // PFMEA ì—°ê²°
  fmeaId        String?  // FK: fmea_projects.id
  fmeaNo        String?  // pfm26-M001 (í‘œì‹œìš©)
  fmeaRev       Int      @default(1)  // ì—°ê²°ëœ PFMEA Rev
  
  // ê¸°ë³¸ ì •ë³´
  projectName   String?  // í”„ë¡œì íŠ¸ëª… (PFMEA ì—°ë™)
  partName      String   // í’ˆëª…
  partNo        String   // í’ˆë²ˆ
  revNo         String   @default("A")  // Rev No
  revDate       String?  // Rev ì¼ì
  customer      String?  // ê³ ê°
  processFrom   String?  // ê³µì • ë²”ìœ„ From
  processTo     String?  // ê³µì • ë²”ìœ„ To
  preparedBy    String?  // ì‘ì„±ì
  approvedBy    String?  // ìŠ¹ì¸ì
  
  // ìƒíƒœ
  status        String   @default("draft")  // draft | approved | obsolete
  
  // ë™ê¸°í™” ë©”íƒ€
  syncStatus    String   @default("new")    // new | synced | modified
  lastSyncAt    DateTime?
  changeCount   Int      @default(0)        // ë³€ê²½ ì•Œë¦¼ ì¹´ìš´íŠ¸
  
  // íƒ€ì„ìŠ¤íƒ¬í”„
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  
  // ê´€ê³„
  items         ControlPlanItem[]
  
  @@index([fmeaId])
  @@index([cpNo])
  @@index([status])
  @@map("control_plans")
}
```

### 5.3 control_plan_items í…Œì´ë¸”

```prisma
model ControlPlanItem {
  id              String   @id @default(uuid())
  cpId            String   // FK: control_plans.id
  
  // ===== PFMEA í–‰ ì—°ê²° (ì¶”ì ì„±) =====
  pfmeaRowUid     String?  // PFMEA_ROW_UID (project_id + rev + process_no + work_element_id)
  pfmeaProcessId  String?  // PFMEA L2 ê³µì • ID
  pfmeaWorkElemId String?  // PFMEA L3 ì‘ì—…ìš”ì†Œ ID
  
  // ===== ê³µì •í˜„í™© (PFMEA ì—°ë™, Read-only) =====
  processNo       String   // ê³µì •ë²ˆí˜¸
  processName     String   // ê³µì •ëª…
  processLevel    String?  // ê³µì •ë ˆë²¨ (Main/Sub)
  processDesc     String?  // ê³µì •ì„¤ëª…
  workElement     String?  // ì‘ì—…ìš”ì†Œ
  
  // ===== ê³µì •í˜„í™© (CP ì „ìš©, Editable) =====
  equipment       String?  // ì„¤ë¹„/ê¸ˆí˜•/Jig/Tools
  detectorNo      Boolean  @default(false)  // ê²€ì¶œì¥ì¹˜_NO
  detectorEp      Boolean  @default(false)  // ê²€ì¶œì¥ì¹˜_EP
  detectorAuto    Boolean  @default(false)  // ê²€ì¶œì¥ì¹˜_ìë™ê²€ì‚¬
  
  // ===== ê´€ë¦¬í•­ëª© (PFMEA ì—°ë™) =====
  productChar     String?  // ì œí’ˆíŠ¹ì„±
  processChar     String?  // ê³µì •íŠ¹ì„±
  specialChar     String?  // íŠ¹ë³„íŠ¹ì„± (CC/SC/IC)
  
  // ===== ê´€ë¦¬í•­ëª© (CP ì „ìš©) =====
  specTolerance   String?  // ìŠ¤í™/ê³µì°¨
  
  // ===== ê´€ë¦¬ë°©ë²• (CP ì „ìš©, Editable) =====
  evalMethod      String?  // í‰ê°€/ì¸¡ì •ë°©ë²•
  sampleSize      String?  // ìƒ˜í”Œë§ í¬ê¸°
  sampleFreq      String?  // ìƒ˜í”Œë§ ì£¼ê¸°
  controlMethod   String?  // ê´€ë¦¬ë°©ë²•
  owner1          String?  // ì±…ì„1
  owner2          String?  // ì±…ì„2
  reactionPlan    String?  // ëŒ€ì‘ê³„íš
  
  // ===== ë¦¬ìŠ¤í¬ ì°¸ì¡° (PFMEA Read-only) =====
  refSeverity     Int?     // ì‹¬ê°ë„ ì°¸ì¡°
  refOccurrence   Int?     // ë°œìƒë„ ì°¸ì¡°
  refDetection    Int?     // ê²€ì¶œë„ ì°¸ì¡°
  refAp           String?  // AP ì°¸ì¡° (H/M/L)
  refRpn          Int?     // RPN ì°¸ì¡°
  
  // ===== ìƒíƒœ =====
  linkStatus      String   @default("linked")  // linked | changed | unlinked
  changeFlag      Boolean  @default(false)     // ë³€ê²½ ì•Œë¦¼ Flag
  
  // ì •ë ¬
  sortOrder       Int      @default(0)
  
  // íƒ€ì„ìŠ¤íƒ¬í”„
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  // ê´€ê³„
  controlPlan     ControlPlan @relation(fields: [cpId], references: [id], onDelete: Cascade)
  
  @@index([cpId])
  @@index([pfmeaRowUid])
  @@index([pfmeaProcessId])
  @@map("control_plan_items")
}
```

### 5.4 sync_logs í…Œì´ë¸”

```prisma
model SyncLog {
  id          String   @id @default(uuid())
  
  sourceType  String   // 'pfmea' | 'cp'
  sourceId    String   // ì›ë³¸ ID
  targetType  String   // 'pfmea' | 'cp'
  targetId    String   // ëŒ€ìƒ ID
  
  action      String   // 'create' | 'update' | 'delete' | 'lock' | 'obsolete'
  status      String   @default("pending")  // pending | synced | failed
  errorMsg    String?  // ì‹¤íŒ¨ ì‹œ ì˜¤ë¥˜ ë©”ì‹œì§€
  
  fieldChanges Json?   // ë³€ê²½ëœ í•„ë“œ ëª©ë¡ { field: { old, new } }
  
  syncedAt    DateTime?
  createdAt   DateTime @default(now())
  
  @@index([sourceType, sourceId])
  @@index([targetType, targetId])
  @@index([status])
  @@map("sync_logs")
}
```

---

## 6. API ì„¤ê³„

### 6.1 CP CRUD API

```
POST   /api/control-plan                    # CP ìƒì„±
GET    /api/control-plan                    # CP ëª©ë¡ ì¡°íšŒ
GET    /api/control-plan/[id]               # CP ìƒì„¸ ì¡°íšŒ
PUT    /api/control-plan/[id]               # CP ìˆ˜ì •
DELETE /api/control-plan/[id]               # CP ì‚­ì œ
```

### 6.2 ë™ê¸°í™” API

```
POST   /api/control-plan/sync/from-pfmea    # PFMEA â†’ CP ë™ê¸°í™”
POST   /api/control-plan/sync/to-pfmea      # CP â†’ PFMEA ì—­ë™ê¸°í™”
GET    /api/control-plan/sync/status/[id]   # ë™ê¸°í™” ìƒíƒœ ì¡°íšŒ
POST   /api/control-plan/sync/resolve       # ì¶©ëŒ í•´ê²°
```

### 6.3 ìƒíƒœ ë³€ê²½ API

```
POST   /api/control-plan/[id]/approve       # CP ìŠ¹ì¸
POST   /api/control-plan/[id]/revise        # CP ê°œì • (Rev+1)
POST   /api/control-plan/[id]/obsolete      # CP íê¸°
```

### 6.4 íŠ¸ëœì­ì…˜ ë™ê¸°í™” ì˜ˆì‹œ

```typescript
// POST /api/control-plan/sync/from-pfmea
export async function POST(req: Request) {
  const { fmeaId } = await req.json();
  
  return await prisma.$transaction(async (tx) => {
    // 1. PFMEA ë°ì´í„° ì¡°íšŒ
    const fmea = await tx.fmeaProject.findUnique({ 
      where: { id: fmeaId }, 
      include: { l2: true, l3: true, riskData: true } 
    });
    
    // 2. CP ë²ˆí˜¸ ìƒì„± (pfm26-M001 â†’ cp26-M001)
    const cpNo = fmea.fmeaNo.replace('pfm', 'cp');
    
    // 3. CP ìƒì„± ë˜ëŠ” ì—…ë°ì´íŠ¸
    const cp = await tx.controlPlan.upsert({
      where: { cpNo },
      create: { 
        cpNo, 
        fmeaId, 
        fmeaNo: fmea.fmeaNo,
        fmeaRev: fmea.revNo,
        projectName: fmea.projectName,
        partName: fmea.partName,
        partNo: fmea.partNo,
        customer: fmea.customer,
      },
      update: { 
        syncStatus: 'synced',
        lastSyncAt: new Date(),
      }
    });
    
    // 4. CP í•­ëª© ìƒì„± (PFMEA L2/L3 ê¸°ë°˜)
    await syncItemsFromPfmea(tx, fmea, cp.id);
    
    // 5. ë™ê¸°í™” ë¡œê·¸ ê¸°ë¡
    await tx.syncLog.create({
      data: {
        sourceType: 'pfmea',
        sourceId: fmeaId,
        targetType: 'cp',
        targetId: cp.id,
        action: 'sync',
        status: 'synced',
        syncedAt: new Date(),
      }
    });
    
    return { success: true, cp };
  }, {
    timeout: 30000,
    isolationLevel: 'Serializable'
  });
}
```

---

## 7. ì…ë ¥/ì œì–´ ê·œì¹™

### 7.1 í¸ì§‘ ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤

| ìƒíƒœ | PFMEA ì—°ê³„ ì»¬ëŸ¼ | CP ì „ìš© ì»¬ëŸ¼ | ê´€ë¦¬ë°©ë²• ì»¬ëŸ¼ |
|------|----------------|-------------|--------------|
| PFMEA Draft + CP Draft | Read-only | Editable | Editable |
| PFMEA Approved + CP Draft | Read-only (ì ê¸ˆ) | Editable | Editable |
| PFMEA Approved + CP Approved | Read-only | Read-only | Read-only |
| PFMEA Revised | Read-only (ì‹ ê·œ) | Editable (ì‹ ê·œ) | Editable (ì‹ ê·œ) |

### 7.2 ì ê¸ˆ ê·œì¹™

```
â‘  PFMEA ì—°ê³„ ì»¬ëŸ¼ì€ í•­ìƒ ì§ì ‘ ìˆ˜ì • ë¶ˆê°€ (Read-only)
â‘¡ PFMEA ìŠ¹ì¸ í›„ CPëŠ” êµ¬ì¡° ì ê¸ˆ (ê´€ë¦¬ë°©ë²•ë§Œ í¸ì§‘)
â‘¢ CP ìŠ¹ì¸ í›„ ì „ì²´ ì ê¸ˆ (ì¡°íšŒ ì „ìš©)
â‘£ PFMEA ê°œì • ë°œìƒ ì‹œ CP ì‹ ê·œ Draft ìë™ ìƒì„±
â‘¤ í–‰ ì¶”ê°€/ì‚­ì œëŠ” PFMEA ê³µì • ê¸°ì¤€ì— ì˜í•´ ìë™ ì œì–´
```

---

## 8. UI ìš”êµ¬ì‚¬í•­

### 8.1 ê·¸ë¦¬ë“œ êµ¬í˜„ (Handsontable)

```typescript
// í—¤ë” 2ë‹¨ ê³ ì •
nestedHeaders: [
  ['ê³µì •í˜„í™©', '', '', '', '', '', '', '', '', 'ê´€ë¦¬í•­ëª©', '', '', '', 'ê´€ë¦¬ë°©ë²•', '', '', '', '', '', '', 'ìƒíƒœ', '', '', ''],
  ['ê³µì •ë²ˆí˜¸', 'ê³µì •ëª…', 'ê³µì •ë ˆë²¨', 'ê³µì •ì„¤ëª…', 'ì‘ì—…ìš”ì†Œ', 'ì„¤ë¹„/ê¸ˆí˜•', 'NO', 'EP', 'ìë™', 'ì œí’ˆíŠ¹ì„±', 'ê³µì •íŠ¹ì„±', 'íŠ¹ë³„íŠ¹ì„±', 'ìŠ¤í™/ê³µì°¨', 'ì¸¡ì •ë°©ë²•', 'ìƒ˜í”Œí¬ê¸°', 'ìƒ˜í”Œì£¼ê¸°', 'ê´€ë¦¬ë°©ë²•', 'ì±…ì„1', 'ì±…ì„2', 'ëŒ€ì‘ê³„íš', 'ì—°ê³„ìƒíƒœ', 'S', 'AP', 'ë³€ê²½']
]

// ì»¬ëŸ¼ ê°•ì¡° ìƒ‰ìƒ
cells(row, col) {
  if (col <= 4 || (col >= 9 && col <= 11)) {
    return { readOnly: true, className: 'pfmea-linked-cell' }
  }
}
```

### 8.2 ìƒ‰ìƒ ê°€ì´ë“œ

| ì˜ì—­ | ë°°ê²½ìƒ‰ | ìš©ë„ |
|------|--------|------|
| ê³µì •í˜„í™© í—¤ë” | `#1565c0` | PFMEA ì—°ë™ êµ¬ì¡° |
| ê´€ë¦¬í•­ëª© í—¤ë” | `#2e7d32` | í’ˆì§ˆ íŠ¹ì„± |
| ê´€ë¦¬ë°©ë²• í—¤ë” | `#f57c00` | CP ì „ìš© ê´€ë¦¬ |
| ìƒíƒœ í—¤ë” | `#c62828` | ë¦¬ìŠ¤í¬/ìƒíƒœ |
| PFMEA ì—°ê³„ ì…€ | `#e3f2fd` | Read-only í‘œì‹œ |
| ë³€ê²½ ê°ì§€ í–‰ | `#fff3e0` | ë³€ê²½ ì•Œë¦¼ Highlight |
| íŠ¹ë³„íŠ¹ì„± CC | `#dc2626` | Critical |
| íŠ¹ë³„íŠ¹ì„± SC | `#ea580c` | Significant |

---

## 9. ê°œë°œ ë¡œë“œë§µ

### Phase 1: DB ìŠ¤í‚¤ë§ˆ ë° API (1ì¼)

| íƒœìŠ¤í¬ | ì˜ˆìƒ ì‹œê°„ | ìƒíƒœ |
|--------|----------|------|
| Prisma ìŠ¤í‚¤ë§ˆ ì¶”ê°€ (3ê°œ í…Œì´ë¸”) | 30ë¶„ | â¬œ |
| DB ë§ˆì´ê·¸ë ˆì´ì…˜ | 15ë¶„ | â¬œ |
| CP CRUD API | 2ì‹œê°„ | â¬œ |
| ë™ê¸°í™” API | 2ì‹œê°„ | â¬œ |

### Phase 2: ì›Œí¬ì‹œíŠ¸ DB ì—°ë™ (1ì¼)

| íƒœìŠ¤í¬ | ì˜ˆìƒ ì‹œê°„ | ìƒíƒœ |
|--------|----------|------|
| ì›Œí¬ì‹œíŠ¸ í˜ì´ì§€ DB ì—°ë™ | 3ì‹œê°„ | â¬œ |
| 24ê°œ ì»¬ëŸ¼ ê·¸ë¦¬ë“œ êµ¬í˜„ | 2ì‹œê°„ | â¬œ |
| Read-only ì œì–´ | 1ì‹œê°„ | â¬œ |

### Phase 3: PFMEA ì—°ë™ (1ì¼)

| íƒœìŠ¤í¬ | ì˜ˆìƒ ì‹œê°„ | ìƒíƒœ |
|--------|----------|------|
| PFMEAâ†’CP ë™ê¸°í™” íŠ¸ë¦¬ê±° | 2ì‹œê°„ | â¬œ |
| CPâ†’PFMEA ì—­ì—°ë™ | 2ì‹œê°„ | â¬œ |
| ë³€ê²½ ì•Œë¦¼ ì‹œìŠ¤í…œ | 1ì‹œê°„ | â¬œ |
| ìƒíƒœ ë¨¸ì‹  êµ¬í˜„ | 1ì‹œê°„ | â¬œ |

### Phase 4: í…ŒìŠ¤íŠ¸ ë° ì½”ë“œí”„ë¦¬ì¦ˆ (0.5ì¼)

| íƒœìŠ¤í¬ | ì˜ˆìƒ ì‹œê°„ | ìƒíƒœ |
|--------|----------|------|
| TDD ê²€ì¦ (10ê°œ ì‹œë‚˜ë¦¬ì˜¤) | 2ì‹œê°„ | â¬œ |
| DB ì €ì¥ ê²€ì¦ | 1ì‹œê°„ | â¬œ |
| ì½”ë“œí”„ë¦¬ì¦ˆ | 30ë¶„ | â¬œ |

---

## 10. í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ (í•„ìˆ˜)

| No | ì‹œë‚˜ë¦¬ì˜¤ | ì˜ˆìƒ ê²°ê³¼ |
|----|----------|----------|
| 1 | PFMEA í–‰ ì¶”ê°€ | CP í–‰ ìë™ ìƒì„± |
| 2 | PFMEA í–‰ ì‚­ì œ | CP í–‰ ë¹„í™œì„± ì²˜ë¦¬ |
| 3 | PFMEA íŠ¹ë³„íŠ¹ì„± ë³€ê²½ | CP Highlight + ì•Œë¦¼ |
| 4 | PFMEA ìŠ¹ì¸ | CP êµ¬ì¡° ì ê¸ˆ |
| 5 | PFMEA Rev ì¦ê°€ | ê¸°ì¡´ CP Obsolete, ì‹ ê·œ CP Draft |
| 6 | CP ê´€ë¦¬ë°©ë²• ì €ì¥ | íŠ¸ëœì­ì…˜ ë™ì‹œ ì €ì¥ |
| 7 | CP ìŠ¹ì¸ | ì „ì²´ ì ê¸ˆ |
| 8 | 500+í–‰ ë¡œë”© | 3ì´ˆ ì´ë‚´ ë Œë”ë§ |
| 9 | Excel Export | ìŠ¹ì¸ëœ CPë§Œ ì¶œë ¥ |
| 10 | ê°ì‚¬ Trace View | PFMEA-CP ì—°ê²° í‘œì‹œ |

---

## 11. íŒŒì¼ êµ¬ì¡°

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ control-plan/                    # CP í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ page.tsx                     # CP ë©”ì¸ (ë¦¬ë‹¤ì´ë ‰íŠ¸)
â”‚   â”‚   â”œâ”€â”€ register/page.tsx            # CP ë“±ë¡
â”‚   â”‚   â”œâ”€â”€ list/page.tsx                # CP ëª©ë¡
â”‚   â”‚   â”œâ”€â”€ worksheet/page.tsx           # CP ì›Œí¬ì‹œíŠ¸ (ìˆ˜ì • í•„ìš”)
â”‚   â”‚   â”œâ”€â”€ revision/page.tsx            # ê°œì •ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â”œâ”€â”€ CPTabMenu.tsx
â”‚   â”‚       â”œâ”€â”€ CPTopMenuBar.tsx
â”‚   â”‚       â””â”€â”€ CPSyncStatus.tsx         # ë™ê¸°í™” ìƒíƒœ (ì‹ ê·œ)
â”‚   â”‚
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ control-plan/                # CP API (ì‹ ê·œ)
â”‚           â”œâ”€â”€ route.ts                 # CRUD
â”‚           â”œâ”€â”€ [id]/route.ts            # ë‹¨ê±´ ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ
â”‚           â”œâ”€â”€ [id]/approve/route.ts    # ìŠ¹ì¸
â”‚           â”œâ”€â”€ [id]/revise/route.ts     # ê°œì •
â”‚           â””â”€â”€ sync/
â”‚               â”œâ”€â”€ from-pfmea/route.ts  # PFMEAâ†’CP
â”‚               â”œâ”€â”€ to-pfmea/route.ts    # CPâ†’PFMEA
â”‚               â””â”€â”€ status/route.ts      # ìƒíƒœ ì¡°íšŒ
â”‚
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma                    # DB ìŠ¤í‚¤ë§ˆ (ìˆ˜ì • í•„ìš”)
â”‚
â””â”€â”€ lib/
    â”œâ”€â”€ cp-sync.ts                       # ë™ê¸°í™” ìœ í‹¸ë¦¬í‹° (ì‹ ê·œ)
    â””â”€â”€ cp-state-machine.ts              # ìƒíƒœ ë¨¸ì‹  (ì‹ ê·œ)
```

---

## 12. êµ¬í˜„ ì™„ë£Œ ê¸°ëŠ¥ (Code Freeze: 2026-01-12)

### 12.1 CP ì›Œí¬ì‹œíŠ¸ UI

#### 12.1.1 ë ˆì´ì•„ì›ƒ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [CPTopNav] ê¸€ë¡œë²Œ ë„¤ë¹„ê²Œì´ì…˜                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [CPTopMenuBar] CPëª… | ì €ì¥ | Import | Export | í–‰ ì¶”ê°€ | FMEA ë™ê¸°í™”      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [CPTabMenu] ALL | ê³µì •í˜„í™© | ê´€ë¦¬í•­ëª© | ê´€ë¦¬ë°©ë²• | ëŒ€ì‘ê³„íš                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [í…Œì´ë¸” í—¤ë”]                                                             â”‚
â”‚  1í–‰: ê·¸ë£¹ í—¤ë” (ê³µì •í˜„í™©, ê²€ì¶œì¥ì¹˜, ê´€ë¦¬í•­ëª©, ê´€ë¦¬ë°©ë²•, ëŒ€ì‘ê³„íš)              â”‚
â”‚  2í–‰: ì»¬ëŸ¼ í—¤ë” (ê³µì •ë²ˆí˜¸, ê³µì •ëª…, ë ˆë²¨, ê³µì •ì„¤ëª…, ...)                       â”‚
â”‚  3í–‰: ì—´ ë²ˆí˜¸ (A, B, C, D, E, F, ...)                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ë°ì´í„° ì˜ì—­] - 19ì»¬ëŸ¼ ë°˜ì‘í˜• í…Œì´ë¸”                                        â”‚
â”‚  - ì…€ ë†’ì´: 25px                                                         â”‚
â”‚  - ë°˜ì‘í˜• ì»¬ëŸ¼í­ (minWidth ê¸°ì¤€, ìë™ í™•ì¥)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 12.1.2 ì»¬ëŸ¼ êµ¬ì¡° (19ì»¬ëŸ¼)

| ì—´ë²ˆí˜¸ | ê·¸ë£¹ | ì»¬ëŸ¼ëª… | Key | í­(px) | íƒ€ì… | ë³‘í•© | ì»¨í…ìŠ¤íŠ¸ë©”ë‰´ |
|--------|------|--------|-----|--------|------|------|--------------|
| A | ê³µì •í˜„í™© | ê³µì •ë²ˆí˜¸ | processNo | 45 | text | Level1 | - |
| B | ê³µì •í˜„í™© | ê³µì •ëª… | processName | 65 | text | Level1 | - |
| C | ê³µì •í˜„í™© | ë ˆë²¨ | processLevel | 45 | select | Level2 | - |
| D | ê³µì •í˜„í™© | ê³µì •ì„¤ëª… | processDesc | 150 | text | Level2 | âœ… |
| E | ê³µì •í˜„í™© | ì„¤ë¹„/ê¸ˆí˜•/JIG | workElement | 80 | text | Level3 | âœ… |
| F | ê²€ì¶œì¥ì¹˜ | EP | detectorEp | 40 | boolean | - | - |
| G | ê²€ì¶œì¥ì¹˜ | ìë™ | detectorAuto | 40 | boolean | - | - |
| H | ê´€ë¦¬í•­ëª© | NO | charNo | 25 | auto | - | - |
| I | ê´€ë¦¬í•­ëª© | ì œí’ˆíŠ¹ì„± | productChar | 80 | text | - | âœ… |
| J | ê´€ë¦¬í•­ëª© | ê³µì •íŠ¹ì„± | processChar | 80 | text | - | - |
| K | ê´€ë¦¬í•­ëª© | íŠ¹ë³„íŠ¹ì„± | specialChar | 35 | select | - | - |
| L | ê´€ë¦¬í•­ëª© | ìŠ¤í™/ê³µì°¨ | specTolerance | 75 | text | - | - |
| M | ê´€ë¦¬ë°©ë²• | í‰ê°€ë°©ë²• | evalMethod | 70 | text | - | - |
| N | ê´€ë¦¬ë°©ë²• | ìƒ˜í”Œ | sampleSize | 35 | text | - | - |
| O | ê´€ë¦¬ë°©ë²• | ì£¼ê¸° | sampleFreq | 45 | select | - | - |
| P | ê´€ë¦¬ë°©ë²• | ê´€ë¦¬ë°©ë²• | controlMethod | 80 | text | - | - |
| Q | ê´€ë¦¬ë°©ë²• | ì±…ì„1 | owner1 | 50 | select | - | - |
| R | ê´€ë¦¬ë°©ë²• | ì±…ì„2 | owner2 | 50 | select | - | - |
| S | ëŒ€ì‘ê³„íš | ëŒ€ì‘ê³„íš | reactionPlan | 200 | text | - | - |

### 12.2 ê³„ì¸µì  ì…€ ë³‘í•© (RowSpan)

```
Level 1: A(ê³µì •ë²ˆí˜¸) + B(ê³µì •ëª…)
    â”‚    â””â”€ ê°™ì€ ê³µì •ë²ˆí˜¸+ê³µì •ëª… â†’ rowSpan ìë™ ë³‘í•©
    â†“
Level 2: C(ë ˆë²¨) + D(ê³µì •ì„¤ëª…)  
    â”‚    â””â”€ ê°™ì€ Level1 + ë ˆë²¨+ê³µì •ì„¤ëª… â†’ rowSpan ìë™ ë³‘í•©
    â†“
Level 3: E(ì„¤ë¹„/ê¸ˆí˜•/JIG)
    â”‚    â””â”€ ê°™ì€ Level2 + ì„¤ë¹„ â†’ rowSpan ìë™ ë³‘í•©
    â†“
Level 4: F~S (ê°œë³„ í–‰)
         â””â”€ ê° íŠ¹ì„±ë³„ ë…ë¦½ ë°ì´í„°
```

### 12.3 ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ (ìš°í´ë¦­)

| ëŒ€ìƒ ì…€ | ë©”ë‰´ ì•„ì´ì½˜ | í–‰ ì¶”ê°€ ì‹œ ë³µì‚¬ë˜ëŠ” ë¶€ëª¨ í•„ë“œ |
|---------|-------------|------------------------------|
| D (ê³µì •ì„¤ëª…) | ğŸ“‹ ê³µì •ì„¤ëª… ê¸°ì¤€ | A(ê³µì •ë²ˆí˜¸), B(ê³µì •ëª…) |
| E (ì„¤ë¹„/ê¸ˆí˜•/JIG) | ğŸ”§ ì„¤ë¹„/ê¸ˆí˜•/JIG ê¸°ì¤€ | A, B, C(ë ˆë²¨), D(ê³µì •ì„¤ëª…) |
| I (ì œí’ˆíŠ¹ì„±) | ğŸ“Š ì œí’ˆíŠ¹ì„± ê¸°ì¤€ | A, B, C, D, E(ì„¤ë¹„/ê¸ˆí˜•/JIG) |

#### ë©”ë‰´ í•­ëª©:
- â¬†ï¸ **ìœ„ë¡œ í–‰ ì¶”ê°€** - í˜„ì¬ í–‰ ìœ„ì— ìƒˆ í–‰ ì‚½ì…
- â¬‡ï¸ **ì•„ë˜ë¡œ í–‰ ì¶”ê°€** - í˜„ì¬ í–‰ ì•„ë˜ì— ìƒˆ í–‰ ì‚½ì…
- ğŸ—‘ï¸ **í–‰ ì‚­ì œ** - í˜„ì¬ í–‰ ì‚­ì œ (ìµœì†Œ 1í–‰ ìœ ì§€)

### 12.4 ë“œë¡­ë‹¤ìš´ ì˜µì…˜

| ì»¬ëŸ¼ | ì˜µì…˜ |
|------|------|
| ë ˆë²¨ (C) | Main, Sub, ì™¸ì£¼ |
| íŠ¹ë³„íŠ¹ì„± (K) | -, CC, SC, â—‡, ì—†ìŒ |
| ì£¼ê¸° (O) | ì—°ì†, 1/Lot, 1/ì¼, 1/ì£¼, 1/ì›”, ì´ˆì¤‘ì¢…, ê¸°íƒ€ |
| ì±…ì„1, ì±…ì„2 (Q, R) | ìƒì‚°, í’ˆì§ˆ, ì—°êµ¬, ê¸°ìˆ , ë¬¼ë¥˜, ì„¤ë¹„ |

### 12.5 ìë™ ê³„ì‚° í•„ë“œ

| ì»¬ëŸ¼ | ê³„ì‚° ë¡œì§ |
|------|-----------|
| NO (H) | ê³µì •ë³„ íŠ¹ì„± ìˆœë²ˆ (ê°™ì€ ê³µì •ë²ˆí˜¸+ê³µì •ëª… ë‚´ì—ì„œ 1, 2, 3...) |

### 12.6 ìƒë‹¨ ë©”ë‰´ë°” ê¸°ëŠ¥

| ë²„íŠ¼ | ê¸°ëŠ¥ | ìƒíƒœ |
|------|------|------|
| CPëª… | CP ì„ íƒ ë“œë¡­ë‹¤ìš´ | âœ… UI |
| ì €ì¥ | í˜„ì¬ ë°ì´í„° ì €ì¥ | âœ… UI |
| Import | ë°ì´í„° ê°€ì ¸ì˜¤ê¸° | ğŸ”² ì˜ˆì • |
| Export | ë°ì´í„° ë‚´ë³´ë‚´ê¸° | ğŸ”² ì˜ˆì • |
| í–‰ ì¶”ê°€ | ë§¨ ì•„ë˜ ìƒˆ í–‰ ì¶”ê°€ | âœ… êµ¬í˜„ |
| FMEA ë™ê¸°í™” | PFMEA ë°ì´í„° ê°€ì ¸ì˜¤ê¸° | âœ… UI |

### 12.7 íŒŒì¼ êµ¬ì¡°

```
src/app/control-plan/worksheet/
â”œâ”€â”€ page.tsx                    # ë©”ì¸ ì›Œí¬ì‹œíŠ¸ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ cpConstants.ts              # ì»¬ëŸ¼/ìƒ‰ìƒ/ì˜µì…˜ ìƒìˆ˜
â””â”€â”€ components/
    â”œâ”€â”€ CPTopNav.tsx            # ê¸€ë¡œë²Œ ë„¤ë¹„ê²Œì´ì…˜
    â”œâ”€â”€ CPTopMenuBar.tsx        # ìƒë‹¨ ë©”ë‰´ë°”
    â””â”€â”€ CPTabMenu.tsx           # íƒ­ ë©”ë‰´
```

### 12.8 ì£¼ìš” ê¸°ìˆ  ìŠ¤íƒ

- **í”„ë ˆì„ì›Œí¬**: Next.js 14 (App Router)
- **ìŠ¤íƒ€ì¼ë§**: Tailwind CSS
- **ìƒíƒœê´€ë¦¬**: React useState, useMemo, useCallback
- **í…Œì´ë¸”**: Native HTML Table (ë°˜ì‘í˜•, tableLayout: auto)

### 12.9 ìˆ˜ë™/ìë™ ì…ë ¥ ëª¨ë“œ í† ê¸€

#### ìœ„ì¹˜
```
[âœ‹ìˆ˜ë™] | ALL | ê³µì •í˜„í™© | ê´€ë¦¬í•­ëª© | ê´€ë¦¬ë°©ë²• | ëŒ€ì‘ê³„íš | ...
```
- íƒ­ ë©”ë‰´ ì¢Œì¸¡ì— í† ê¸€ ë²„íŠ¼ ë°°ì¹˜
- í´ë¦­ìœ¼ë¡œ ëª¨ë“œ ì „í™˜

#### ëª¨ë“œë³„ ë™ì‘

| ëª¨ë“œ | ì•„ì´ì½˜ | ìƒ‰ìƒ | ì‘ì„± ë°©ì‹ | ëŒ€ìƒ ì…€ |
|------|--------|------|-----------|---------|
| **ìˆ˜ë™** | âœ‹ | ğŸ”µ íŒŒë‘ (`bg-blue-600`) | ìš°í´ë¦­ â†’ ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ | D, E, Iì—´ |
| **ìë™** | ğŸ¤– | ğŸŸ£ ë³´ë¼ (`bg-purple-600`) | í´ë¦­ â†’ ì…ë ¥ ëª¨ë‹¬ | D, E, Iì—´ |

#### ìë™ ëª¨ë“œ ì‹œê°ì  í‘œì‹œ

| ì…€ | ê°•ì¡° ìƒ‰ìƒ | ì•„ì´ì½˜ |
|----|-----------|--------|
| D (ê³µì •ì„¤ëª…) | `#e3f2fd` (ì—°í•œ íŒŒë‘) | â• íŒŒë‘ |
| E (ì„¤ë¹„/ê¸ˆí˜•/JIG) | `#e8f5e9` (ì—°í•œ ë…¹ìƒ‰) | â• ë…¹ìƒ‰ |
| I (ì œí’ˆíŠ¹ì„±) | `#fff3e0` (ì—°í•œ ì£¼í™©) | â• ì£¼í™© |

#### ìë™ ëª¨ë“œ ì…ë ¥ ëª¨ë‹¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– ìë™ í–‰ ì¶”ê°€                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‹ [ê¸°ì¤€ íƒ€ì…] ê¸°ì¤€                â”‚
â”‚ ë³µì‚¬ë  ë¶€ëª¨: [ë¶€ëª¨ í•„ë“œ ëª©ë¡]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì¶”ê°€ ìœ„ì¹˜                        â”‚
â”‚ [â¬†ï¸ ìœ„ë¡œ] [â¬‡ï¸ ì•„ë˜ë¡œ]             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ì·¨ì†Œ] [âœ… í–‰ ì¶”ê°€]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ê¸°ì¤€ë³„ ë³µì‚¬ í•„ë“œ

| ê¸°ì¤€ | ëª¨ë‹¬ ì•„ì´ì½˜ | ë³µì‚¬ë˜ëŠ” ë¶€ëª¨ í•„ë“œ |
|------|-------------|-------------------|
| ê³µì •ì„¤ëª… | ğŸ“‹ | ê³µì •ë²ˆí˜¸, ê³µì •ëª… |
| ì„¤ë¹„/ê¸ˆí˜•/JIG | ğŸ”§ | ê³µì •ë²ˆí˜¸, ê³µì •ëª…, ë ˆë²¨, ê³µì •ì„¤ëª… |
| ì œí’ˆíŠ¹ì„± | ğŸ“Š | ê³µì •ë²ˆí˜¸, ê³µì •ëª…, ë ˆë²¨, ê³µì •ì„¤ëª…, ì„¤ë¹„/ê¸ˆí˜•/JIG |

#### ìƒíƒœ íƒ€ì… ì •ì˜

```typescript
// CPTabMenu.tsx
export type CPInputMode = 'manual' | 'auto';

// page.tsx
const [inputMode, setInputMode] = useState<CPInputMode>('manual');

const [autoModal, setAutoModal] = useState<{
  visible: boolean;
  rowIdx: number;
  type: 'process' | 'work' | 'char';
  position: 'above' | 'below';
}>({ visible: false, rowIdx: -1, type: 'process', position: 'below' });
```

---

## 13. ì°¸ê³  ë¬¸ì„œ

- `docs/ê´€ë¦¬ê³„íšì„œ_PRD.md` - í™”ë©´ ì •ì˜ì„œ
- `docs/CP_PFMEA_ë°ì´í„°ì—°ê³„ì„±.md` - ë°ì´í„° ì—°ê³„ ìƒì„¸
- `docs/DB_SCHEMA.md` - ì „ì²´ DB ìŠ¤í‚¤ë§ˆ
- `src/app/pfmea/worksheet/types/controlPlan.ts` - CP íƒ€ì… ì •ì˜
- `src/lib/shared-schema.ts` - ê³µìœ  ìŠ¤í‚¤ë§ˆ

---

## 14. ì½”ë“œí”„ë¦¬ì¦ˆ íƒœê·¸

### 14.1 ì™„ë£Œëœ íƒœê·¸
- âœ… `codefreeze-20260112-cp-worksheet-ui` - CP ì›Œí¬ì‹œíŠ¸ UI ì™„ë£Œ
  - 19ì»¬ëŸ¼ ë°˜ì‘í˜• í…Œì´ë¸”
  - ê³„ì¸µì  ì…€ ë³‘í•© (4ë‹¨ê³„)
  - ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ (í–‰ ì¶”ê°€/ì‚­ì œ)
  - ìƒë‹¨ ë©”ë‰´ë°” ë° íƒ­ ë©”ë‰´

### 14.2 ì˜ˆì •ëœ íƒœê·¸
- ğŸ”² `codefreeze-20260112-cp-db-schema` - DB ìŠ¤í‚¤ë§ˆ
- ğŸ”² `codefreeze-20260112-cp-crud-api` - CRUD API
- ğŸ”² `codefreeze-20260112-cp-pfmea-sync` - PFMEA ë™ê¸°í™”
- ğŸ”² `codefreeze-20260112-cp-complete` - ì „ì²´ ì™„ë£Œ

---

**ë¬¸ì„œ ë**
